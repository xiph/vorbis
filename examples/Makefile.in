# vorbis makefile configured for use with gcc on any platform

# $Id: Makefile.in,v 1.10 2000/06/19 15:14:15 xiphmont Exp $

###############################################################################
#                                                                             #
# To build a production vorbis (preferrably using gmake), just type 'make'.   #
# To build with debugging or profiling information, use 'make debug' or       #
# 'make profile' respectively.  'make clean' is a good idea between builds    #
# with different target names, or before a final build.                       #
#                                                                             #
###############################################################################


# DO NOT EDIT BELOW! ##########################################################
# (unless, of course, you know what you are doing :) ##########################

@SET_MAKE@
FLAGS=-I. -I../include @CFLAGS@ 
OPT=@OPT@ $(FLAGS)
DEBUG=@DEBUG@ $(FLAGS)
PROFILE=@PROFILE@ $(FLAGS)
CC=@CC@
LD=@CC@
LDFLAGS=@LDFLAGS@ $(FLAGS)
AR=@AR@
RANLIB=@RANLIB@
LIBS=@LIBS@

HFILES =	../include/vorbis/codec.h ../include/vorbis/vorbisfile.h \
		../include/vorbis/internal.h ../include/vorbis/backends.h \
		../include/vorbis/codebook.h
OFILES =	encoder_example.o decoder_example.o chaining_example.o \
		vorbisfile_example.o seeking_test.o
BINFILES =      encoder_example decoder_example chaining_example \
		vorbisfile_example seeking_test

all:
	$(MAKE) target CFLAGS="$(OPT)"

debug:	
	$(MAKE) target CFLAGS="$(DEBUG)"

profile: 
	$(MAKE) target CFLAGS="$(PROFILE)"

target:	$(BINFILES)

encoder_example.o:	../include/vorbis/modes.h

encoder_example:	$(OFILES) ../lib/libvorbis.a
	$(CC) $(CFLAGS) $(LDFLAGS) encoder_example.o ../lib/libvorbis.a -o \
			encoder_example $(LIBS)

decoder_example:	$(OFILES) ../lib/libvorbis.a
	$(CC) $(CFLAGS) $(LDFLAGS) decoder_example.o ../lib/libvorbis.a -o \
			decoder_example $(LIBS)

chaining_example:	$(OFILES) ../lib/libvorbis.a ../lib/vorbisfile.a
	$(CC) $(CFLAGS) $(LDFLAGS) chaining_example.o \
			../lib/vorbisfile.a ../lib/libvorbis.a \
			-o chaining_example $(LIBS)
vorbisfile_example:	$(OFILES) ../lib/libvorbis.a ../lib/vorbisfile.a
	$(CC) $(CFLAGS) $(LDFLAGS) vorbisfile_example.o \
			../lib/vorbisfile.a ../lib/libvorbis.a \
			-o vorbisfile_example $(LIBS)

seeking_test:	$(OFILES) ../lib/libvorbis.a ../lib/vorbisfile.a
	$(CC) $(CFLAGS) $(LDFLAGS) seeking_test.o \
			../lib/vorbisfile.a ../lib/libvorbis.a \
			-o seeking_test $(LIBS)

$(OFILES): 	$(HFILES)

.c.o:
	$(CC) $(CFLAGS) -c $<

clean:
	-rm -f *.o *.a test* *~ *.out ogg config.* \
		encoder_example decoder_example chaining_example

distclean:	clean
	-rm -f Makefile

